---
title: "如何设置树莓派开机启动"
permalink: /tech/startup-script/
excerpt: "这篇文章分享如何设置树莓派开机启动一段代码."
modified: 2016-09-10T22:40:02-04:00
---

{% include base_path %}
{% include toc %}
## 简介
----
在程序开发完成之后，会经常涉及到设置开机启动脚本的问题，不同的平台的设置略微有些不同

## 树莓派开机启动
----
在讲解之前先看一段代码。

```shell

#!/bin/bash
# /etc/init.d/assistant
 
### BEGIN INIT INFO
# Description: This service is used to start the python script
### END INIT INFO
 
case "$1" in
    start)
        echo "Starting Voice Assistant"
        python /home/pi/VoiceAssistant/VoiceAssistant.py &
        ;;
    stop)
        echo "Stopping Voice Assistant"
        #killall ledblink.py
        kill $(ps aux | grep -m 1 'python /home/pi/VoiceAssistant/VoiceAssistant.py' | awk '{ print $2 }')
        ;;
    *)
        echo "Usage: service assistant start|stop"
        exit 1
        ;;
esac
exit 0
``` 

上面这个脚本的作用，就是管理一个Python应用程序（开始、停止），在start)后面加入的是启动代码的命令。 

```shell
python /home/pi/VoiceAssistant/VoiceAssistant.py & 
```

相应的在stop)后面吗加入的是停止程序的代码。

```shell
kill $(ps aux | grep -m 1 'python /home/pi/VoiceAssistant/VoiceAssistant.py' | awk '{ print $2 }')
```

把上面的代码保存到名为‘assistant’的文件里，当然文件名是随意设置的，然后进行如下操作：

###1. 把‘assistant’ 复制到‘/etc/init.d’
```shell
sudo cp assistant /etc/init.d
```

###2. 设置文件为可执行文件
```shell
sudo chmod +x /etc/init.d/assistant
```


###3. 启动应用程序
```shell
sudo /etc/init.d/assistant start
```
###4. 把应用程序设置为开机启动
```shell
sudo update-rc.d assistant defaults
```

###4.重启
```shell
reboot
```

重启完成之后，你就会发现程序会自动运行了。哈哈
###5. 关闭程序
```shell
sudo /etc/init.d/assistant stop
```
